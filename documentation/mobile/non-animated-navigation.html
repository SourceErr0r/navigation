<html>
<head>
    <title>Non-Animated Navigation</title>
    <meta name="viewport" content="width=device-width">
    <style>
        :root {
          --primary-color: #f9858b;
          --secondary-color: #ed335f;
        }    
      </style>
      <link rel="stylesheet" href="../../css/prism.css">
      <link rel="stylesheet" href="../../css/navigation.css">
  </head>
  <body>
      <div id="banner">
        <a href="../.."><img alt="logo" src="../../img/logo.png" /></a>
        <a href="../native/setup.html">React Native</a>
        <a href="https://github.com/grahammendick/navigation">GitHub</a>
      </div>
      <div id="content">
          <div id="menu">
            <h2>
              <img alt="web" src="../../img/web.png" />
              React
            </h2>
            <div id="items">
              <a href="../setup.html">Setup</a>
              <a href="../hello-world.html">Hello World</a>
              <a href="../state-navigation.html">State Navigation</a>
              <a href="../navigation-data.html">Navigation Data</a>
              <a href="../routes.html">Routes</a>
              <a href="../current-data.html">Current Data</a>
              <a href="../html5-history.html">HTML5 History</a>
              <a href="../navigation-lifecycle.html">Navigation Lifecycle</a>
              <a href="../reusable-components.html">Reusable Components</a>
              <a href="../typescript.html">TypeScript</a>
              <a href="../examples.html">Examples</a>
              <h3>Mobile</h3>
              <a href="setup.html">Setup</a>
              <a href="hello-world.html">Hello World</a>
              <a href="animated-navigation.html">Animated Navigation</a>
              <a href="non-animated-navigation.html" class="selected">Non-Animated Navigation</a>
              <a href="clean-urls.html">Clean Urls</a>
              <a href="scene-navigation-lifecycle.html">Navigation Lifecycle</a>
              <a href="shared-element-navigation.html">Shared Element Navigation</a>
              <a href="examples.html">Examples</a>
            </div>
          </div>
          <div id="article">
            <h1>Non-Animated Navigation</h1>
            <p>
                By default, all navigations add a scene to the breadcrumb trail and trigger the animation cycle. This is desirable if the scene changes, like going from the 'inbox' to the 'mail' scene when the user opens an email in our example app. But the animation may be undesirable if the scene doesnâ€™t change, like staying on the 'mail' scene when the user expands an email thread to read the full conversation. This animation would cause a flicker as it fades out the scene with the email collapsed and fades in the scene with the email expanded.
            </p>
            <h2>Picking Up Breadcrumbs</h2>
            <p>
                You can prevent the animation from running by stopping the breadcrumb trail from growing. You should only drop a breadcrumb once a scene's been visited. To stop the breadcrumb trail from growing during a navigation, you attach a function to the <code>truncateCrumbTrail</code> property of the destination <code>State</code>. The Navigation router passes in the proposed breadcrumb trail array that includes the new crumb and you return the truncated breadcrumb trail that excludes it.
            </p>
            <p>
                When the user expands the email in our example app, we shouldn't drop a breadcrumb because the 'mail' scene is still the current one. We attach a <code>truncateCrumbTrail</code> function to the 'mail' State and check if the latest crumb in the breadcrumb trail matches the 'inbox' <code>State</code>. If it does then the user is opening an email and we leave the breadcrumb trail alone. If it doesn't then the user is expanding an email and we remove the latest crumb.
            </p>
            <pre><code class="language-jsx">const {mail} = stateNavigator.states;
mail.truncateCrumbTrail = (state, data, crumbs) => {
  const latestCrumb = crumbs[crumbs.length - 1];
  return latestCrumb.state.key === 'inbox' ? crumbs : crumbs.slice(0, -1); 
};</code></pre>
            <h2>Replacing History</h2>
            <p>
                You must keep the browser history in step with the stack of scenes. Otherwise, the in-built back button won't respect the stack. If you prevent the breadcrumb trail from growing you must also prevent the browser history from growing. You do this by passing a value of 'replace' to the <code>historyAction prop</code> of the <code>NavigationLink</code> component. When the user taps the Hyperlink the Url updates without adding to the browser history. In our email example, we'll add this prop to the <code>NavigationLink</code> that expands the email thread.     
            </p>
            <pre><code class="language-jsx">&lt;NavigationLink 
  stateKey="mail"
  navigationData={{id: mail.id, expand: true}}
  historyAction="replace">
  Expand Thread
&lt;/NavigationLink></code></pre>
        </div>
    </div>
    <script type="text/javascript" src="../../js/prism.js"></script>
</body>
</html>