<html>
<head>
    <title>Shared Element Transition (Android)</title>
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="../../css/prism.css">
    <link rel="stylesheet" href="../../css/navigation.css">
    <style>
      :root {
        --primary-color: #9cc3d5ff;
        --secondary-color: #0063b2ff;
      }    
    </style>
</head>
<body>
    <div id="banner">
      <a href="../../native"><img alt="logo" src="../../img/logo.png" /></a>
      <a href="../setup.html">React</a>
      <a href="https://github.com/grahammendick/navigation">GitHub</a>
    </div>
    <div id="content">
        <div id="menu">
            <h2>
                <img alt="native" src="../../img/native.png" />
                React Native
            </h2>
            <div id="items">
                <a href="setup.html">Setup</a>
                <a href="hello-world.html">Hello World</a>
                <a href="push-navigation.html">Push Navigation</a>
                <a href="pop-navigation.html">Pop Navigation</a>
                <a href="navigation-bar.html">Navigation Bar</a>
                <a href="tab-bar.html">Tab Bar</a>
                <a href="modal.html">Modal</a>
                <a href="drawer.html">Drawer</a>
                <a href="scene-navigation-lifecycle.html">Scene Navigation Lifecycle</a>
                <a href="custom-animation.html">Custom Animation (Android)</a>
                <a href="shared-element-transition.html" class="selected">Shared Element Transition (Android)</a>
                <a href="deep-links.html">Deep Links</a>
                <a href="examples.html">Examples</a>
            </div>
        </div>
        <div id="article">
            <h1>Shared Element Transition (Android)</h1>
            <p>
                Android supports shared element transitions, where you can smoothly animate between UI elements that are common across two scenes. The Navigation router exposes this functionality to React using the <code>SharedElement</code> component. To identify a pair of shareable elements, you wrap each one in a <code>SharedElement</code> component and give them both the same <code>name</code>.
            </p>
            <p>
                In our email example app, we can smooth out the transition when a user opens an email by sharing the subject of the email between the 'inbox' scene and the 'mail' scene. We wrap the subject elements on each scene inside a <code>SharedElement</code> component and give them both the same name.
            </p>
            <pre><code class="language-jsx">// The 'inbox' scene
&lt;TouchableHighlight
  onPress={() => {
    stateNavigator.navigate('mail', {id: id});
  }}>
  &lt;SharedElement name={'email' + id}>
    &lt;Text>Meeting invite&lt;/Text>
  &lt;/SharedElement>
&lt;/TouchableHighlight></code></pre>
            <pre><code class="language-jsx">// The 'mail' scene
&lt;SharedElement name={'email' + id}>
  &lt;Text>Meeting invite&lt;/Text>
&lt;/SharedElement></code></pre>
            <p> 
                When you navigate between two <code>States</code>, the Navigation router calls the function you assign to the <code>sharedElements</code> prop of the <code>NavigationStack</code> component. You return an array containing the names of the shared elements that are to participate in the transition. In our email example, we check the destination is the 'mail' <code>State</code> before returning the name corresponding to the selected email.
            </p>
            <pre><code class="language-jsx">&lt;NavigationHandler stateNavigator={stateNavigator}>
  &lt;NavigationStack sharedElements={(state, data) => (
    state.key === 'mail' ? ['email' + data.id] : null
  )} />
&lt;/NavigationHandler>                
</code></pre>
            <h2>Customising Transitions</h2>
            <p>
                You can change the default shared element animation by creating an Android transition resource file. In our email example application, we want the email subject to overshoot its target slightly before settling into place. Inside Android Studio, we right click the root of our project and choose 'New -> Android Resource File'. In the pop-up dialog, we enter a name of 'email_overshoot', pick 'Transition' from the resource type dropdown and enter 'transition' for the directory name. We configure our animation using the built-in 'overshoot' interpolator.
            </p>
            <pre><code class="language-jsx">&lt;?xml version="1.0" encoding="utf-8"?>
&lt;transitionSet xmlns:android="http://schemas.android.com/apk/res/android">
  &lt;changeBounds android:interpolator="@android:interpolator/overshoot"/>
  &lt;changeTransform android:interpolator="@android:interpolator/overshoot"/>
&lt;/transitionSet></code></pre>
            <p>
                To get this animation to play when the 'mail' scene's <code>Text</code> component mounts and unmounts, we pass the name of our resource file to the <code>transition</code> prop of the <code>SharedElement</code> component.
            </p>
            <pre><code class="language-jsx">// The 'mail' scene
&lt;SharedElement name={'email' + id} transition="email_overshoot">
  &lt;Text>Meeting invite&lt;/Text>
&lt;/SharedElement></code></pre>
        </div>
    </div>
    <script type="text/javascript" src="../../js/prism.js"></script>
</body>
</html>